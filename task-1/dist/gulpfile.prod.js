"use strict";var _require=require("gulp"),src=_require.src,dest=_require.dest,parallel=_require.parallel,series=_require.series,watch=_require.watch,autoprefixer=require("gulp-autoprefixer"),cleanCSS=require("gulp-clean-css"),uglify=require("gulp-uglify-es").default,del=require("del"),browserSync=require("browser-sync").create(),sass=require("gulp-sass"),rename=require("gulp-rename"),fileinclude=require("gulp-file-include"),gutil=require("gulp-util"),ftp=require("vinyl-ftp"),sourcemaps=require("gulp-sourcemaps"),notify=require("gulp-notify"),htmlmin=require("gulp-htmlmin"),resources=function(){return src("./src/resources/**").pipe(dest("./app"))},imgToApp=function(){return src(["./src/img/**.jpg","./src/img/**.png","./src/img/**.jpeg","./src/img/*.svg"]).pipe(dest("./app/img"))},htmlInclude=function(){return src(["./src/*.html"]).pipe(fileinclude({prefix:"@",basepath:"@file"})).pipe(dest("./app")).pipe(browserSync.stream())},styles=function(){return src("./src/scss/**/*.scss").pipe(sourcemaps.init()).pipe(sass({outputStyle:"expanded"}).on("error",notify.onError())).pipe(rename({suffix:".min"})).pipe(autoprefixer({cascade:!1})).pipe(cleanCSS({level:2})).pipe(sourcemaps.write(".")).pipe(dest("./app/css/")).pipe(browserSync.stream())};function scripts(){return gulp.src(jsFiles).pipe(concat("script.js")).pipe(uglify({toplevel:!0})).pipe(gulp.dest("./build/js")).pipe(browserSync.stream())}var watchFiles=function(){browserSync.init({server:{baseDir:"./app"}}),watch("./src/scss/**/*.scss",styles),watch("./src/js/**/*.js",scripts),watch("./src/html/*.html",htmlInclude),watch("./src/*.html",htmlInclude),watch("./src/img/**.jpg",imgToApp),watch("./src/img/**.jpeg",imgToApp),watch("./src/img/**.png",imgToApp),watch("./src/fonts/**",fonts)},clean=function(){return del(["app/*"])},stylesBuild=function(){return src("./src/scss/**/*.scss").pipe(sass({outputStyle:"expanded"}).on("error",notify.onError())).pipe(rename({suffix:".min"})).pipe(autoprefixer({cascade:!1})).pipe(cleanCSS({level:2})).pipe(dest("./app/css/"))},htmlMinify=function(){return src("app/**/*.html").pipe(htmlmin({collapseWhitespace:!0})).pipe(dest("app"))};exports.cache=series(cache,rewrite),exports.build=series(clean,parallel(htmlInclude,scriptsBuild,fonts,imgToApp),stylesBuild,htmlMinify);var deploy=function(){var e=ftp.create({host:"",user:"",password:"",parallel:10,log:gutil.log});return src(["app/**"],{base:"./app",buffer:!1}).pipe(e.newer("")).pipe(e.dest(""))};exports.deploy=deploy;