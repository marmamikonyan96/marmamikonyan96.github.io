"use strict";var gulp=require("gulp"),concat=require("gulp-concat"),imagemin=require("gulp-imagemin"),autoprefixer=require("gulp-autoprefixer"),cleanCSS=require("gulp-clean-css"),uglify=require("gulp-uglify"),browserSync=require("browser-sync").create(),sourcemaps=require("gulp-sourcemaps"),sass=require("gulp-sass"),styleFiles=["./src/sass/main.scss"],scriptFiles=["./src/js/main.js"];gulp.task("styles",function(){return gulp.src(styleFiles).pipe(sourcemaps.init()).pipe(sass()).pipe(concat("style.css")).pipe(autoprefixer({browsers:["last 2 versions"],cascade:!1})).pipe(cleanCSS({level:2})).pipe(sourcemaps.write("./")).pipe(gulp.dest("./build/css")).pipe(browserSync.stream())}),gulp.task("img-compress",function(){return gulp.src("./src/img/**").pipe(imagemin({progresive:!0})).pipe(gulp.dest("./build/img/"))}),gulp.task("scripts",function(){return gulp.src(scriptFiles).pipe(concat("script.js")).pipe(uglify({toplevel:!0})).pipe(gulp.dest("./build/js")).pipe(browserSync.stream())}),gulp.task("watch",function(){browserSync.init({server:{baseDir:"./"}}),gulp.watch("./src/sass/**/*.scss",gulp.series("styles")),gulp.watch("./src/img/**",gulp.series("img-compress")),gulp.watch("./src/js/**/*.js",gulp.series("scripts")),gulp.watch("./*.html").on("change",browserSync.reload)}),gulp.task("default",gulp.series(gulp.parallel("styles","scripts","img-compress"),"watch"));